<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" crossorigin="anonymous">
    <title>Detalle videojuego</title>
    <style>
        :root{
            --gap: 1rem;
            --img-max-width: 20rem;
            --img-max-height: 18rem;
            --muted: #9c9c9c;
        }
        body { background:#0f0f0f; color:#eee; }
        .detail-card { background: #141414; border: none; border-radius:0.6rem; box-shadow: 0 0.6rem 1.2rem rgba(0,0,0,0.6); padding: 1.2rem; }
        .detail-img { max-width: var(--img-max-width); max-height: var(--img-max-height); width:100%; height:auto; object-fit:contain; border-radius:0.4rem; background:#0b0b0b; display:block; }
        .meta { color: var(--muted); font-size: 0.95rem; }
        .price { font-size: 1.6rem; font-weight:700; color:#4ade80; padding:0.25rem 0.6rem; background: rgba(74,222,128,0.08); border-radius:0.4rem; }
        .stock { font-weight:600; }
        .description { margin-top: 0.8rem; color:#ddd; }
        .back-btn { margin-top: 1rem; }
        @media (max-width: 767px) {
            :root{ --img-max-width: 14rem; --img-max-height: 12rem; }
            .price { font-size:1.2rem; }
        }
    </style>
</head>
<body>
<nav th:replace="~{components/navbar :: nav_bar}"></nav>
<div class="container py-4">
    <!-- allow controller to provide either 'entity' (BaseController) or 'videojuego' -->
    <div th:with="game=${entity != null ? entity : (videojuego != null ? videojuego : null)}">
        <div th:if="${game} == null" class="alert alert-warning">No se encontró el videojuego solicitado.</div>

        <div class="row" th:if="${game} != null">
            <div class="col-12">
                <div class="detail-card">
                    <div class="row align-items-start">
                        <div class="col-12 col-md-4 text-center mb-3 mb-md-0">
                            <img th:src="${game.img}" th:alt="${game.title}" class="detail-img"/>
                        </div>
                        <div class="col-12 col-md-8">
                            <h2 th:text="${game.title}" th:object="${game}">Título del juego</h2>
                            <div class="d-flex flex-wrap align-items-center" style="gap:0.8rem;">
                                <div class="meta">
                                    <div th:if="${game.developers != null}">Desarrollador: <strong th:text="${game.developers.name}"></strong></div>
                                    <div th:if="${game.genres != null}">Género: <strong th:text="${game.genres.name}"></strong></div>
                                    <div th:if="${game.releaseDate != null}">Lanzamiento: <span th:text="${#dates.format(game.releaseDate, 'yyyy-MM-dd')}"></span></div>
                                </div>
                                <div>
                                    <span class="price" th:text="${'$' + game.price}">$0.00</span>
                                </div>
                                <div>
                                    <span class="stock" th:if="${game.stock != null and game.stock > 0}" th:text="${'Stock: ' + game.stock}"></span>
                                    <span class="text-danger" th:if="${game.stock == null or game.stock <= 0}">Sin stock</span>
                                </div>
                                <div>
                                    <span th:if="${game.active == false}" class="badge badge-danger">Inactivo</span>
                                </div>
                            </div>

                            <div class="description">
                                <p th:text="${game.description}">Descripción del juego...</p>
                            </div>

                            <div class="mt-3">
                                <a th:href="@{/videogames/list}" class="btn btn-outline-light back-btn">Volver al listado</a>
                                <a th:href="@{/{entityName}/{id}/edit(entityName=${entityName},id=${game.id})}" th:if="${entityName != null}" class="btn btn-warning ml-2">Editar</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>