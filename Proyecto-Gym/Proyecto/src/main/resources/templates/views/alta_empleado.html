<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Empleados - Gimnasio</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/css/bootstrap-datepicker.min.css">

</head>
<body>

<!-- Navbar -->
<div th:replace="~{components/navbar :: nav_bar}"></div>

<div class="container mt-4">

  <!-- Mensajes -->
  <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>
  <div th:if="${msg}" class="alert alert-success" th:text="${msg}"></div>

  <form th:action="@{/empleados/crear}" method="post" th:object="${empleado}">
    <div class="mb-3">
      <label for="nombre" class="form-label">Nombre</label>
      <input type="text" id="nombre" th:field="*{nombre}" class="form-control" placeholder="Ingrese el nombre" required>
    </div>

    <div class="mb-3">
      <label for="apellido" class="form-label">Apellido</label>
      <input type="text" id="apellido" th:field="*{apellido}" class="form-control" placeholder="Ingrese el apellido" required>
    </div>
    <div class="mb-3">
      <label for="email" class="form-label">Email</label>
      <input type="email" id="email" th:field="*{email}" class="form-control" placeholder="Ingrese el email" required>
    </div>
    <div class="mb-3">
      <label for="tipoDocumento" class="form-label">Tipo Documento</label>
      <select class="form-control" id="tipoDocumento"
              th:field="*{tipoDocumento}" onchange="toggleDocumento()">
        <option th:each="tipoDocumento : ${T(com.sport.proyecto.enums.tipoDocumento).values()}"
                th:value="${tipoDocumento.name()}"
                th:text="${tipoDocumento.descripcion}">
        </option>
      </select>
    </div>
    <div class="mb-3">
      <label for="dni" class="form-label">DNI</label>
      <input type="text" id="dni" th:field="*{numeroDocumento}" class="form-control" placeholder="Ingrese el DNI" required>
    </div>
    <div class="mb-3">
      <label for="tipoEmpleado" class="form-label">Tipo Empleado</label>
      <select class="form-control" name="tipoEmpleado">
        <option th:each="tipoEmpleado : ${tiposEmpleado}"
                th:value="${tipoEmpleado}"
                th:text="${tipoEmpleado}">
        </option>
      </select>
    </div>
    <div class="mb-3">
      <label for="fechaNacimiento" class="form-label">Fecha de Nacimiento</label>
      <input type="text" class="form-control" id="fechaNacimiento"
             name="fechaNacimiento"
             th:value="${empleado.fechaNacimiento != null} ? ${#temporals.format(empleado.fechaNacimiento, 'dd-MM-yyyy')} : ''"
             required>
    </div>
    <div class="mb-3">
      <label for="telefono" class="form-label">Teléfono</label>
      <input type="text" id="telefono" th:field="*{telefono}" class="form-control" placeholder="Ingrese el teléfono" required>
    </div>

    <div class="d-flex justify-content-end">
      <button type="submit" class="btn btn-primary">
        Aceptar
      </button>
    </div>


</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Incluí esto antes de cerrar el </body> -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/js/bootstrap-datepicker.min.js"></script>
<script>
  $(document).ready(function(){
    $('#fechaNacimiento').datepicker({
      format: 'dd-mm-yyyy',     // formato visible
      autoclose: true,
      todayHighlight: true
    });
  });

  function toggleDocumento() {
    const tipoSelect = document.getElementById("tipoDocumento");
    const documentoGroup = document.getElementById("documentoGroup");
    const documentoInput = document.getElementById("dni");

    if (tipoSelect.value === "SIN_DOCUMENTO") { // ajustá al valor real que uses
      documentoGroup.style.display = "none";
      documentoInput.value = ""; // limpia si ya había escrito
    } else {
      documentoGroup.style.display = "block";
    }
  }
</script>
</body>
</html>
